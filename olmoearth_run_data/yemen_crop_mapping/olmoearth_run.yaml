window_prep:
  sampler:
    class_path: olmoearth_run.runner.tools.samplers.noop_sampler.NoopSampler
  labeled_window_preparer:
    class_path: olmoearth_projects.projects.yemen_crop.dense_polygon_to_raster.DensePolygonToRasterWindowPreparer
    init_args:
      window_resolution: 10.0
  data_splitter:
    class_path: olmoearth_run.runner.tools.data_splitters.spatial_data_splitter.SpatialDataSplitter
    init_args:
      train_prop: 0.75
      val_prop: 0.25
      test_prop: 0.0
      grid_size: 128 # in pixels
  label_layer: "label"
  group_name: "spatial_split"
  split_property: "split"

partition_strategies:
  partition_request_geometry:
    class_path: olmoearth_run.runner.tools.partitioners.grid_partitioner.GridPartitioner
    init_args:
      grid_size: 1.0

  prepare_window_geometries:
    class_path: olmoearth_run.runner.tools.partitioners.grid_partitioner.GridPartitioner
    init_args:
      grid_size: 1024
      output_projection:
        class_path: rslearn.utils.geometry.Projection
        init_args:
          crs: EPSG:3857
          x_resolution: 10
          y_resolution: -10
      use_utm: true

postprocessing_strategies:
  process_dataset:
    class_path: olmoearth_run.runner.tools.postprocessors.combine_geotiff.CombineGeotiff
    init_args:
      nodata_value: 10

  process_partition:
    class_path: olmoearth_run.runner.tools.postprocessors.combine_geotiff.CombineGeotiff
    init_args:
      nodata_value: 10

  process_window:
    class_path: olmoearth_run.runner.tools.postprocessors.noop_raster.NoopRaster

inference_results_config:
  data_type: RASTER
  classification_fields:
    - property_name: segment
  #     band_index: 1
  #     allowed_values:
  #       - value: 0
  #         label: coffee
  #         color: [124, 67, 18]
  #       - value: 1
  #         label: grassland
  #         color: [169, 214, 146]
  #       - value: 2
  #         label: trees
  #         color: [51, 160, 44]
  #       - value: 3
  #         label: maize
  #         color: [240, 159, 28]
  #       - value: 4
  #         label: sugarcane
  #         color: [251, 154, 153]
  #       - value: 5
  #         label: tea
  #         color: [31, 234, 146]
  #       - value: 6
  #         label: vegetables
  #         color: [166, 206, 227]
  #       - value: 7
  #         label: legumes
  #         color: [227, 26, 28]
  #       - value: 8
  #         label: water
  #         color: [31, 120, 180]
  #       - value: 9
  #         label: builtup
  #         color: [136, 33, 233]
  # detection_objects: null
  # regression_fields: null
